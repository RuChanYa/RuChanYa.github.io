{"version":3,"sources":["pages/home/index.jsx"],"names":["tags","color","name","Home","useState","ticketList","setTicketList","crtValue","setValue","imgUrl","setImgUrl","loading","setLoading","makeListByNum","Array","fill","map","redList","makeArrByIndex","blueList","sortedRedBalls","randomListByNums","sort","a","b","Number","makeOneData","startIndex","endIndex","item","index","randomList","nums","arr","currentNum","randomOne","includes","push","length","Math","floor","random","slice","isInWeixinApp","navigator","userAgent","toLocaleLowerCase","saveProveImg","base64Url","link","document","createElement","href","setAttribute","style","display","body","appendChild","click","className","content","title","headerStyle","Item","moment","format","listItem","ballList","ballIndex","tag","onClick","setTimeout","window","pageYOffset","documentElement","scrollTop","canvasELe","getElementsByClassName","html2canvas","useCORS","then","canvas","toDataURL","src","value","ticks","onChange","min","max","console","log"],"mappings":"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","file":"static/js/4.4c50669e.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport { Button, List, Card, Slider, Tag, NoticeBar,Image ,DotLoading} from 'antd-mobile';\nimport html2canvas from 'html2canvas';\nimport moment from 'moment'\nimport './index.less';\nconst tags = [\n\t{\n\t\tcolor: 'warning',\n\t\tname: '锦鲤附体',\n\t},\n\t{\n\t\tcolor: 'success',\n\t\tname: '喜鹊登枝',\n\t},\n\t{\n\t\tcolor: 'danger',\n\t\tname: '天降洪福',\n\t},\n\t{\n\t\tcolor: '#87d068',\n\t\tname: '搏彩人生',\n\t},\n\t{\n\t\tcolor: '#ff6430',\n\t\tname: '紫气东来',\n\t},\n\t{\n\t\tcolor: '#87d068',\n\t\tname: '马上发财',\n\t},\n\t{\n\t\tcolor: '#ff6430',\n\t\tname: '精彩十分',\n\t},\n\t{\n\t\tcolor: '#108ee9',\n\t\tname: '运气爆棚',\n\t},\n\t{\n\t\tcolor: '#2db7f5',\n\t\tname: '福至心灵',\n\t},\n];\nconst times = 2000\nconst Home = () => {\n\tconst [ticketList, setTicketList] = useState([]);\n\tconst [crtValue, setValue] = useState(5);\n  const [imgUrl,setImgUrl] = useState('')\n  const [loading,setLoading] = useState(false)\n\t// 生成一注\n\tconst makeOneData = () => {\n\t\tconst redList = makeArrByIndex(1, 33);\n\t\tconst blueList = makeArrByIndex(1, 16);\n\n\t\tlet sortedRedBalls = randomListByNums(redList, 6).sort((a, b) => {\n\t\t\treturn Number(a) - Number(b);\n\t\t});\n\t\treturn [...sortedRedBalls, ...randomListByNums(blueList, 1)];\n\t};\n\t// 生成指定注数的列表\n\tconst makeListByNum = () => {\n\t\tlet tickList = new Array(crtValue).fill([]);\n\t\treturn tickList.map(() => {\n\t\t\treturn makeOneData();\n\t\t});\n\t};\n\t// 生成指定开头结尾的递增列表\n\tconst makeArrByIndex = (startIndex, endIndex) => {\n\t\tlet arr = new Array(endIndex - startIndex + 1).fill(null);\n\t\treturn arr.map((item, index) => {\n\t\t\treturn startIndex + index;\n\t\t});\n\t};\n\t// 从某个列表中随机出指定个数的不重复元素\n\tconst randomListByNums = (randomList, nums) => {\n\t\tlet arr = [];\n\t\twhile (nums > 0) {\n\t\t\tlet currentNum = randomOne(randomList);\n\t\t\tif (!arr.includes(currentNum)) {\n\t\t\t\tnums--;\n\t\t\t\tarr.push(currentNum);\n\t\t\t}\n\t\t}\n\t\treturn arr;\n\t};\n\t// 列表中随机一个元素\n\tconst randomOne = (randomList) => {\n\t\tlet length = randomList.length;\n\t\tlet index = Math.floor(Math.random() * length);\n\t\treturn ('0' + randomList[index]).slice(-2);\n\t};\n\n\tconst makeList = () => {\n    setLoading(true)\n    setTimeout(() => {\n      console.log(makeListByNum());\n      setTicketList(makeListByNum());\n      setLoading(false)\n    },times)\n\t\n\t};\n\tconst saveImg = () => {\n    setLoading(true)\n    setTimeout(() => {\n     \n      setLoading(false)\n\t\t// 解决保存图片绘制不全的问题\n\t\twindow.pageYOffset = 0;\n\t\tdocument.documentElement.scrollTop = 0;\n\t\tdocument.body.scrollTop = 0;\n\n\t\tlet canvasELe = document.getElementsByClassName('canvas-box')[0];\n\n\t\t// html2canvas    保存图片的问题： 1.useCORS:true 2 。img添加 属性：crossOrigin=\"anonymous\"  参考： https://www.jianshu.com/p/22bd5b98e38a\n\t\thtml2canvas(canvasELe, { useCORS: true }).then((canvas) => {\n      if(isInWeixinApp()){\n        setImgUrl(canvas.toDataURL())\n      }else{\n        saveProveImg(canvas.toDataURL());\n      }\n     \n\t\t\n\t\t});\n  },times)\n\t};\n  const isInWeixinApp = function() {\n    return navigator.userAgent.toLocaleLowerCase().includes('micromessenger');\n  };\n\t// 浏览器下载图片\n\tconst saveProveImg = (base64Url) => {\n\t\tvar link = document.createElement('a');\n\t\tlink.href = base64Url; //下载链接\n\t\tlink.setAttribute('download', '机选双色球.png');\n\t\tlink.style.display = 'none';\n\t\tdocument.body.appendChild(link);\n\t\tlink.click();\n\t};\n  const demoLongText = '机选福彩双色球。好运爆棚，欧皇附体，冲冲冲～'\n  const doAgain = () => {\n    setImgUrl('')\n    setTicketList([])\n  }\n\treturn (\n\t\t<div className='home'>\n       <NoticeBar content={demoLongText} color='alert' />\n\t\t\t{ticketList.length > 0 && (\n\t\t\t\t<Card\n\t\t\t\t\ttitle='幸运结果'\n\t\t\t\t\theaderStyle={{\n\t\t\t\t\t\tcolor: '#1677ff',\n\t\t\t\t\t}}>\n             {!imgUrl &&\n\t\t\t\t\t<><List className='canvas-box'>\n              <List.Item className='time'> {moment().format(\"YYYY-MM-DD\")}</List.Item>\n              {ticketList.map((listItem, index) => {\n                return (\n                  <List.Item key={index}>\n                    {listItem.map((ballList, ballIndex) => {\n                      return (\n                        <span className='ball' key={index + '-' + ballIndex}>{ballList}</span>\n                      );\n                    })}\n                  </List.Item>\n                );\n              })}{' '}\n            </List><div className='card-content'>\n                <div className='tag-box'>\n                  {tags.map((tag, index) => {\n                    return <Tag key={index} color={tag.color}>{tag.name}</Tag>;\n                  })}\n                </div>\n\n                <Button color='danger' onClick={() => saveImg()}>\n                  生成图片\n                  {loading && <DotLoading color='#fff' />}\n                </Button>\n              </div></>}\n\n          {imgUrl && <div className='result-box'><Image src={imgUrl}></Image><div className='tips save-img-tip'>tips: 长按上方图片保存</div><Button color='danger' onClick={() => doAgain()}>\n            重新选择\n          </Button></div>\n          }\n\t\t\t\t</Card>\n\t\t\t)}\n\t\t\t{ticketList.length === 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<Card\n\t\t\t\t\t\ttitle='选择注数'\n\t\t\t\t\t\theaderStyle={{\n\t\t\t\t\t\t\tcolor: '#1677ff',\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\tvalue={crtValue}\n\t\t\t\t\t\t\tticks\n\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\tsetValue(value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\tmax={20}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className='tips'>tips: 拖动滑块选择注数</div>\n\t\t\t\t\t\t<div className='card-content'>\n\t\t\t\t\t\t\t<div className='cur-num'>\n\t\t\t\t\t\t\t\t当前选择的注数：<Tag  className='nums' color='danger'>{crtValue}注</Tag>{' '}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='tag-box'>\n\t\t\t\t\t\t\t\t{tags.map((tag,index) => {\n\t\t\t\t\t\t\t\t\treturn <Tag key={index} color={tag.color}>{tag.name}</Tag>;\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n              \n\t\t\t\t\t\t\t<Button color='danger' onClick={() => makeList()}>\n\t\t\t\t\t\t\t\t开始机选\n                {loading && <DotLoading color='#fff' />}\n\t\t\t\t\t\t\t</Button>\n                \n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Card>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default Home;\n"],"sourceRoot":""}